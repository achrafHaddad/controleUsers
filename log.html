<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="reg_log.css">
    <title>Document</title>
</head>

<body>
    <form id="sub_log">
        <div class="container">
            <div class="row my-2">
                <div class="col-4">
                    <span>Username:</span>
                </div>
                <div class="col">
                    <input type="text" id="user_log">
                </div>
            </div>
            <div class="row my-2">
                <div class="col-4">
                    <span>Mot de passe:</span>
                </div>
                <div class="col">
                    <input type="password" id="pass_log">
                </div>
            </div>
            <div class="row">
                <div class="col d-flex justify-content-center my-2">
                    <button type="submit">submit</button>
                </div>
            </div>
        </div>
    </form>

    <script>
        const user_log = document.querySelector("#user_log");
        const pass_log = document.querySelector("#pass_log");
        const sub_log = document.querySelector("#sub_log");
        localStorage.getItem("user");
        let store = localStorage.getItem("user");
        // console.log(store);
        store_pars = JSON.parse(store);

        sub_log.addEventListener("submit", el => {
            el.preventDefault();
            let log_user= false;
            let log_pass = false;
            let r = 0;

            for (let i = 0; i < store_pars.length; i++) {
                // console.log(store_pars[i]);
                if (user_log.value.length) {
                    if (user_log.value === store_pars[i].username) {
                        // alert("correct username")
                        // log_user = true;
                        if (pass_log.value.length) {
                            if (pass_log.value === store_pars[i].password) {
                                // alert("correct password")
                                // log_pass = true;
                                localStorage.setItem("con_user",JSON.stringify(store_pars[i]));
                                window.location.href = "aff.html";
                                break;
                            } else { alert("wrong password") };
                        };
                    } else { r++; };
                };
                if (r==store_pars.length){
                    alert("wrong username")
                };
            };
        });

    </script>
</body>

</html>